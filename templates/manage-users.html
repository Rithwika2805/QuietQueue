<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Users - QuietQueue</title>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8f9fa; margin: 0; }
        header {
            background-color: #00897b; color: white;
            padding: 15px 30px; display: flex; justify-content: space-between; align-items: center;
        }
        header h1 { font-size: 22px; margin: 0; }
        header a {
            background-color: white; color: #00897b; padding: 8px 16px;
            border-radius: 6px; text-decoration: none; font-weight: 600;
        }
        .container {
            max-width: 1000px; margin: 40px auto; background: white;
            border-radius: 10px; padding: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #eee; padding: 12px; text-align: left; }
        th { background-color: #f5f5f5; color: #333; }
        tr:hover { background-color: #fafafa; }
        .delete-btn {
            background-color: #e53935; color: white;
            border: none; border-radius: 5px; cursor: pointer; padding: 6px 10px;
        }
    </style>
</head>
<body>
    <header>
        <h1>üë• Manage Users</h1>
        <a href="{{ url_for('admin_dashboard') }}">‚Üê Back</a>
    </header>

    <div class="container">
        <h2>Registered Students</h2>
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>Roll No</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Course</th>
                    <th>Semester</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for s in students %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ s.roll_number }}</td>
                    <td>{{ s.full_name }}</td>
                    <td>{{ s.email }}</td>
                    <td>{{ s.course }}</td>
                    <td>{{ s.semester }}</td>
                    <td>
                        <button class="delete-btn" onclick="deleteUser('{{ s.id }}')">Delete</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <script>
    function deleteUser(id) {
        if (confirm("Are you sure you want to delete this user?")) {
            fetch(`/api/delete-user/${id}`, { method: "DELETE" })
            .then(res => res.json())
            .then(data => {
                alert(data.message);
                if (data.status === "success") location.reload();
            });
        }
    }
    </script>
</body>
</html>